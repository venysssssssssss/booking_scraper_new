{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Bem vindo a documenta\u00e7\u00e3o do booking_scraper","text":""},{"location":"#tecnologias","title":"Tecnologias","text":"<ul> <li><code>pyenv</code> - Controlar vers\u00f5es Python.</li> <li><code>poetry</code> - Gerenciamento de pacotes e ambiente virtual.</li> <li><code>pandas</code> - Manipula\u00e7\u00e3o de dados.</li> <li><code>scikit-learn</code> - Constru\u00e7\u00e3o de modelos.</li> <li><code>selenium</code> - Automa\u00e7\u00e3o web/raspagem de dados.</li> <li><code>pytest</code> - Testes unit\u00e1rios e integrados.</li> <li><code>selenium</code> - Automa\u00e7\u00e3o web/raspagem de dados.</li> <li><code>mkdocs</code> - Documenta\u00e7\u00e3o do projeto.</li> <li><code>git/github</code> - Versionamento de c\u00f3digo e deploy da documenta\u00e7\u00e3o.</li> </ul>"},{"location":"#layout-do-projeto","title":"Layout do projeto","text":"<pre><code>mkdocs.yml    # Arquivo de configura\u00e7\u00e3o.\ndocs/\n    index.md  # P\u00e1gina principal da documenta\u00e7\u00e3o.\n    usage.md       # Uso de algumas tecnologias.\n</code></pre>"},{"location":"ai_models/","title":"Documenta\u00e7\u00e3o do Script de An\u00e1lise de Hot\u00e9is","text":"<p>O script <code>hotel_analysis.py</code> realiza a an\u00e1lise visual de hot\u00e9is com base em dados carregados de um arquivo Excel gerado pelo processo ETL. O script utiliza a biblioteca Matplotlib para criar um gr\u00e1fico de dispers\u00e3o, onde os hot\u00e9is s\u00e3o representados de acordo com o pre\u00e7o (di\u00e1ria) e o n\u00famero de avalia\u00e7\u00f5es, com diferentes cores indicando diferentes categorias de avalia\u00e7\u00e3o.</p>"},{"location":"ai_models/#funcao-load_data","title":"Fun\u00e7\u00e3o <code>load_data</code>","text":""},{"location":"ai_models/#descricao","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>load_data(file_path)</code> carrega dados de um arquivo Excel e retorna um DataFrame do Pandas.</p>"},{"location":"ai_models/#parametros","title":"Par\u00e2metros","text":"<ul> <li><code>file_path</code> (str): Caminho do arquivo Excel a ser carregado.</li> </ul>"},{"location":"ai_models/#retorno","title":"Retorno","text":"<ul> <li>DataFrame do Pandas contendo os dados do arquivo Excel.</li> </ul>"},{"location":"ai_models/#funcao-preprocess_data","title":"Fun\u00e7\u00e3o <code>preprocess_data</code>","text":""},{"location":"ai_models/#descricao_1","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>preprocess_data(df)</code> realiza o pr\u00e9-processamento dos dados, removendo s\u00edmbolos, convertendo colunas para tipos de dados apropriados e mapeando categorias para n\u00fameros.</p>"},{"location":"ai_models/#parametros_1","title":"Par\u00e2metros","text":"<ul> <li><code>df</code> (pd.DataFrame): DataFrame do Pandas contendo os dados a serem pr\u00e9-processados.</li> </ul>"},{"location":"ai_models/#retorno_1","title":"Retorno","text":"<ul> <li>Tupla contendo o DataFrame pr\u00e9-processado e um dicion\u00e1rio de mapeamento para as categorias de avalia\u00e7\u00e3o.</li> </ul>"},{"location":"ai_models/#funcao-plot_hotels","title":"Fun\u00e7\u00e3o <code>plot_hotels</code>","text":""},{"location":"ai_models/#descricao_2","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>plot_hotels(df, review_mapping)</code> gera um gr\u00e1fico de dispers\u00e3o para os hot\u00e9is com base no pre\u00e7o e no n\u00famero de avalia\u00e7\u00f5es, usando cores diferentes para cada categoria de avalia\u00e7\u00e3o.</p>"},{"location":"ai_models/#parametros_2","title":"Par\u00e2metros","text":"<ul> <li><code>df</code> (pd.DataFrame): DataFrame do Pandas contendo os dados dos hot\u00e9is.</li> <li><code>review_mapping</code> (dict): Dicion\u00e1rio de mapeamento para as categorias de avalia\u00e7\u00e3o.</li> </ul>"},{"location":"ai_models/#retorno_2","title":"Retorno","text":"<ul> <li>Nenhum (o gr\u00e1fico \u00e9 exibido).</li> </ul>"},{"location":"ai_models/#funcao-main","title":"Fun\u00e7\u00e3o <code>main</code>","text":""},{"location":"ai_models/#descricao_3","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>main()</code> \u00e9 a fun\u00e7\u00e3o principal que orquestra o carregamento dos dados, o pr\u00e9-processamento e a gera\u00e7\u00e3o do gr\u00e1fico de dispers\u00e3o.</p>"},{"location":"ai_models/#parametros_3","title":"Par\u00e2metros","text":"<ul> <li>Nenhum.</li> </ul>"},{"location":"ai_models/#retorno_3","title":"Retorno","text":"<ul> <li>Nenhum (o gr\u00e1fico \u00e9 exibido).</li> </ul>"},{"location":"ai_models/#uso","title":"Uso","text":"<ul> <li>Execute o script para visualizar o gr\u00e1fico de dispers\u00e3o dos hot\u00e9is.</li> </ul> <p>```bash python hotel_analysis.py</p>"},{"location":"etl/","title":"ETL","text":"<ul> <li> <code>extract</code></li> <li> <code>load</code></li> <li> <code>transform</code></li> <li> <code>main_etl</code></li> </ul>"},{"location":"etl/#documentacao-da-funcao-extract_from_excel","title":"Documenta\u00e7\u00e3o da Fun\u00e7\u00e3o <code>extract_from_excel</code>","text":""},{"location":"etl/#descricao","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>extract_from_excel</code> l\u00ea os arquivos Excel de uma pasta espec\u00edfica e retorna uma lista de DataFrames do Pandas.</p>"},{"location":"etl/#parametros","title":"Par\u00e2metros","text":"<ul> <li><code>path</code> (str): O caminho para a pasta contendo os arquivos Excel a serem lidos.</li> </ul>"},{"location":"etl/#retorno","title":"Retorno","text":"<ul> <li>Uma lista de DataFrames do Pandas, cada um representando o conte\u00fado de um arquivo Excel na pasta especificada.</li> </ul>"},{"location":"etl/#funcionamento","title":"Funcionamento","text":"<ol> <li> <p>Listagem de Arquivos: Utiliza a biblioteca <code>glob</code> para listar todos os arquivos Excel (<code>*.xlsx</code>) no diret\u00f3rio especificado pelo caminho.</p> </li> <li> <p>Leitura dos Arquivos: Itera sobre a lista de arquivos e utiliza a biblioteca <code>pandas</code> para ler cada arquivo Excel como um DataFrame.</p> </li> <li> <p>Constru\u00e7\u00e3o da Lista de DataFrames: Adiciona cada DataFrame \u00e0 lista <code>data_frame_list</code>.</p> </li> <li> <p>Retorno: Retorna a lista completa de DataFrames, cada um representando o conte\u00fado de um arquivo Excel na pasta especificada.</p> </li> </ol>"},{"location":"etl/#uso","title":"Uso","text":"<ul> <li>A fun\u00e7\u00e3o pode ser chamada diretamente a partir do script, lendo os arquivos Excel da pasta especificada e exibindo a lista de DataFrames resultante.</li> </ul> <p>```if name == 'main':     data_frame_list = extract_from_excel(path)     print(data_frame_list)</p>"},{"location":"etl/#documentacao-da-funcao-load_to_excel","title":"Documenta\u00e7\u00e3o da Fun\u00e7\u00e3o <code>load_to_excel</code>","text":""},{"location":"etl/#descricao_1","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>load_to_excel</code> recebe um DataFrame do Pandas e o salva como um arquivo Excel (.xlsx) em um caminho especificado.</p>"},{"location":"etl/#parametros_1","title":"Par\u00e2metros","text":"<ul> <li><code>data_frame</code> (pd.DataFrame): O DataFrame a ser salvo como um arquivo Excel.</li> <li><code>output_path</code> (str): O caminho onde o arquivo Excel ser\u00e1 salvo.</li> <li><code>output_file_name</code> (str): O nome do arquivo a ser salvo.</li> </ul>"},{"location":"etl/#retorno_1","title":"Retorno","text":"<ul> <li>Uma string indicando que o arquivo foi salvo com sucesso.</li> </ul>"},{"location":"etl/#funcionamento_1","title":"Funcionamento","text":"<ol> <li> <p>Verifica\u00e7\u00e3o do Diret\u00f3rio de Sa\u00edda: Verifica se o diret\u00f3rio de sa\u00edda especificado (<code>output_path</code>) existe. Se n\u00e3o existir, o cria.</p> </li> <li> <p>Salvamento como Excel: Utiliza o m\u00e9todo <code>to_excel</code> do Pandas para salvar o DataFrame como um arquivo Excel (.xlsx) no caminho especificado.</p> </li> <li> <p>Retorno de Sucesso: Retorna a mensagem \"Arquivo salvo com sucesso\".</p> </li> </ol>"},{"location":"etl/#uso_1","title":"Uso","text":"<ul> <li>A fun\u00e7\u00e3o pode ser chamada com um DataFrame, um caminho de sa\u00edda e um nome de arquivo para salvar o DataFrame como um arquivo Excel.</li> </ul> <p>```python data_frame = pd.DataFrame({'col1': [1, 2, 3], 'col2': ['A', 'B', 'C']}) output_path = 'output_folder' output_file_name = 'output_file' result = load_to_excel(data_frame, output_path, output_file_name) print(result)</p>"},{"location":"etl/#documentacao-da-funcao-contact_dataframes","title":"Documenta\u00e7\u00e3o da Fun\u00e7\u00e3o <code>contact_dataframes</code>","text":""},{"location":"etl/#descricao_2","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>contact_dataframes</code> recebe uma lista de DataFrames do Pandas e os concatena em um \u00fanico DataFrame.</p>"},{"location":"etl/#parametros_2","title":"Par\u00e2metros","text":"<ul> <li><code>data_frame_list</code> (List[pd.DataFrame]): A lista de DataFrames a serem concatenados.</li> </ul>"},{"location":"etl/#retorno_2","title":"Retorno","text":"<ul> <li>Um \u00fanico DataFrame resultante da concatena\u00e7\u00e3o dos DataFrames da lista.</li> </ul>"},{"location":"etl/#funcionamento_2","title":"Funcionamento","text":"<ol> <li> <p>Concatena\u00e7\u00e3o dos DataFrames: Utiliza o m\u00e9todo <code>pd.concat</code> do Pandas para concatenar os DataFrames da lista em um \u00fanico DataFrame.</p> </li> <li> <p>Ignorar \u00cdndices Antigos: O par\u00e2metro <code>ignore_index=True</code> \u00e9 utilizado para redefinir os \u00edndices do DataFrame resultante.</p> </li> <li> <p>Retorno do DataFrame Concatenado: Retorna o DataFrame resultante da concatena\u00e7\u00e3o.</p> </li> </ol>"},{"location":"etl/#uso_2","title":"Uso","text":"<ul> <li>A fun\u00e7\u00e3o pode ser chamada com uma lista de DataFrames para obter um \u00fanico DataFrame concatenado.</li> </ul> <p>```python data_frame_list = [df1, df2, df3]  # Substitua df1, df2, df3 pelos seus DataFrames result_dataframe = contact_dataframes(data_frame_list) print(result_dataframe)</p>"},{"location":"etl/#script-etl-extracao-transformacao-e-carregamento","title":"Script ETL - Extra\u00e7\u00e3o, Transforma\u00e7\u00e3o e Carregamento","text":"<p>Este script realiza as etapas de Extra\u00e7\u00e3o (Extract), Transforma\u00e7\u00e3o (Transform) e Carregamento (Load) de dados usando pandas.</p>"},{"location":"etl/#importacao-de-modulos","title":"Importa\u00e7\u00e3o de M\u00f3dulos","text":"<p>```python from src.pipeline.extract import extract_from_excel from src.pipeline.load import load_to_excel from src.pipeline.transform import contact_dataframes</p>"},{"location":"tests/","title":"Teste da Fun\u00e7\u00e3o <code>construct_url</code>","text":"<p>O teste da fun\u00e7\u00e3o <code>construct_url</code> avalia se a constru\u00e7\u00e3o correta da URL de pesquisa do Booking.com com base nos par\u00e2metros fornecidos. A fun\u00e7\u00e3o recebe informa\u00e7\u00f5es como a data de check-in, data de check-out, destino, n\u00famero de adultos, n\u00famero de quartos, n\u00famero de crian\u00e7as e a moeda. O objetivo \u00e9 garantir que a URL gerada esteja formatada corretamente para ser usada em consultas ao site.</p>"},{"location":"tests/#caso-de-teste-1","title":"Caso de Teste 1","text":"<ul> <li>Check-in date: '2022-01-01'</li> <li>Check-out date: '2022-01-02'</li> <li>Destination: 'New York'</li> <li>Adults: 1</li> <li>Rooms: 1</li> <li>Children: 0</li> <li>Currency: 'USD'</li> </ul> <p>A URL esperada \u00e9: https://www.booking.com/searchresults.en-us.html?checkin=2022-01-01&amp;checkout=2022-01-02&amp;selected_currency=USD&amp;ss=New York&amp;ssne=New York&amp;ssne_untouched=New York&amp;lang=en-us&amp;sb=1&amp;src_elem=sb&amp;src=searchresults&amp;dest_type=city&amp;group_adults=1&amp;no_rooms=1&amp;group_children=0&amp;sb_travel_purpose=leisure</p>"},{"location":"usage/","title":"Uso do Selenium","text":"<p>O Selenium \u00e9 uma ferramenta de automa\u00e7\u00e3o de navegador amplamente utilizada para testes e scraping da web. Nesta se\u00e7\u00e3o, vamos explorar como usar o Selenium em projetos Python.</p>"},{"location":"usage/#instalacao","title":"Instala\u00e7\u00e3o","text":"<p>Antes de come\u00e7ar, certifique-se de ter o Python e o pip instalados em seu sistema. Em seguida, siga as etapas abaixo para instalar o Selenium:</p> <ol> <li> <p>Instale o Pyenv para gerenciar suas vers\u00f5es do Python:     <code>bash     $ pip install pyenv</code></p> </li> <li> <p>Instale o Poetry para gerenciar as depend\u00eancias do projeto:     <code>bash     $ pip install poetry</code></p> </li> <li> <p>Crie um ambiente virtual com a vers\u00e3o correta do Python usando o Pyenv:     <code>bash     $ pyenv install 3.11.3     $ pyenv virtualenv 3.11.3 myenv     $ pyenv activate myenv</code></p> </li> <li> <p>Instale os pacotes usando o Poetry:     <code>bash     $ poetry install</code></p> </li> </ol>"},{"location":"usage/#exemplo-de-uso","title":"Exemplo de Uso","text":"<p>Aqui est\u00e1 um exemplo b\u00e1sico de como usar o Selenium para automatizar a\u00e7\u00f5es em um navegador: <code>from selenium import webdriver</code></p>"},{"location":"usage/#inicializar-o-driver-do-selenium","title":"Inicializar o driver do Selenium","text":"<p><code>driver = webdriver.Chrome()</code></p>"},{"location":"usage/#abrir-uma-pagina-da-web","title":"Abrir uma p\u00e1gina da web","text":"<p><code>driver.get(\"https://www.example.com\")</code></p>"},{"location":"usage/#localizar-um-elemento-na-pagina-e-interagir-com-ele","title":"Localizar um elemento na p\u00e1gina e interagir com ele","text":"<p><code>element = driver.find_element_by_id(\"my-element\")</code> <code>element.click()</code></p>"},{"location":"usage/#fechar-o-navegador","title":"Fechar o navegador","text":"<p><code>driver.quit()</code></p>"},{"location":"webscrapy/","title":"Documenta\u00e7\u00e3o de Web Scraping","text":"<p>Esta documenta\u00e7\u00e3o fornece uma vis\u00e3o geral de um script modularizado de web scraping para extrair informa\u00e7\u00f5es de hot\u00e9is do Booking.com. O script est\u00e1 dividido em v\u00e1rios arquivos, cada um com um prop\u00f3sito espec\u00edfico. Os m\u00f3dulos incluem fun\u00e7\u00f5es para inicializar o WebDriver, construir URLs, clicar em bot\u00f5es, extrair informa\u00e7\u00f5es de hot\u00e9is, salvar dados em arquivos e fazer scraping de v\u00e1rias p\u00e1ginas.</p>"},{"location":"webscrapy/#tabela-de-conteudos","title":"Tabela de Conte\u00fados","text":"<ul> <li>Introdu\u00e7\u00e3o</li> <li>Configura\u00e7\u00e3o</li> <li>Pr\u00e9-requisitos</li> <li>Instala\u00e7\u00e3o</li> <li>Detalhes dos M\u00f3dulos</li> <li> <code>click_button</code></li> <li> <code>close_popup</code></li> <li> <code>construct_url</code></li> <li> <code>extract_hotel_info</code></li> <li> <code>get_hotels</code></li> <li> <code>init_driver</code> e <code>init_service</code></li> <li> <code>main</code></li> <li> <code>save_hotel_info</code></li> <li> <code>scrape_pages</code></li> </ul>"},{"location":"webscrapy/#1-introducao","title":"1. Introdu\u00e7\u00e3o","text":"<p>Este script de web scraping foi projetado para extrair informa\u00e7\u00f5es de hot\u00e9is do Booking.com, oferecendo uma estrutura modular e f\u00e1cil de manter. Ele utiliza o Selenium WebDriver para navegar pelo site, interagir com elementos e extrair dados.</p>"},{"location":"webscrapy/#2-pre-requisitos","title":"2. Pr\u00e9-requisitos","text":"<ul> <li>Python 3.11.3</li> <li>Selenium</li> <li>pandas</li> </ul>"},{"location":"webscrapy/#3-instalacao","title":"3. Instala\u00e7\u00e3o","text":"<p>Instale os pacotes necess\u00e1rios usando os seguintes comandos:</p> <p><code>poetry install</code></p>"},{"location":"webscrapy/#documentacao-da-funcao-click_button","title":"Documenta\u00e7\u00e3o da Fun\u00e7\u00e3o <code>click_button</code>","text":""},{"location":"webscrapy/#descricao","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>click_button</code> \u00e9 utilizada para clicar em um bot\u00e3o em uma p\u00e1gina da web, fazendo uso do driver fornecido.</p>"},{"location":"webscrapy/#parametros","title":"Par\u00e2metros","text":"<ul> <li><code>driver</code>: A inst\u00e2ncia do WebDriver utilizada para interagir com a p\u00e1gina da web.</li> </ul>"},{"location":"webscrapy/#excecoes","title":"Exce\u00e7\u00f5es","text":"<p>A fun\u00e7\u00e3o pode gerar uma exce\u00e7\u00e3o do tipo <code>Exception</code> caso ocorra um erro durante o processo de clicar no bot\u00e3o.</p>"},{"location":"webscrapy/#codigo","title":"C\u00f3digo","text":"<p>Aqui est\u00e1 o c\u00f3digo-fonte da fun\u00e7\u00e3o <code>click_button</code>:</p> <p>```python def click_button(driver):     \"\"\"     Clica em um bot\u00e3o em uma p\u00e1gina da web.</p> <pre><code>:param driver: A inst\u00e2ncia do WebDriver utilizada para interagir com a p\u00e1gina da web.\n:type driver: WebDriver\n\n:raises Exception: Se ocorrer um erro ao clicar no bot\u00e3o.\n\"\"\"\ntry:\n    # Substitua esta linha pelo c\u00f3digo espec\u00edfico para localizar e clicar no bot\u00e3o\nexcept Exception as e:\n    raise Exception(\"Erro ao clicar no bot\u00e3o: {}\".format(str(e)))\n</code></pre>"},{"location":"webscrapy/#documentacao-da-funcao-close_popup","title":"Documenta\u00e7\u00e3o da Fun\u00e7\u00e3o <code>close_popup</code>","text":""},{"location":"webscrapy/#descricao_1","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>close_popup</code> \u00e9 utilizada para fechar uma janela de pop-up clicando na tela.</p>"},{"location":"webscrapy/#parametros_1","title":"Par\u00e2metros","text":"<ul> <li><code>driver</code>: A inst\u00e2ncia do WebDriver utilizada para interagir com a p\u00e1gina da web.</li> </ul>"},{"location":"webscrapy/#excecoes_1","title":"Exce\u00e7\u00f5es","text":"<p>A fun\u00e7\u00e3o pode gerar uma exce\u00e7\u00e3o do tipo <code>Exception</code> caso ocorra um erro durante o processo de fechamento do pop-up.</p>"},{"location":"webscrapy/#codigo_1","title":"C\u00f3digo","text":"<p>Aqui est\u00e1 o c\u00f3digo-fonte da fun\u00e7\u00e3o <code>close_popup</code>:</p> <p>```python def close_popup(driver):     \"\"\"     Fecha a janela de pop-up clicando na tela.</p> <pre><code>:param driver: A inst\u00e2ncia do WebDriver utilizada para interagir com a p\u00e1gina da web.\n:type driver: WebDriver\n\n:raises Exception: Se ocorrer um erro ao fechar o pop-up.\n\"\"\"\ntry:\n    wait = WebDriverWait(driver, 15)\n    element_present = wait.until(\n        EC.presence_of_element_located(\n            (\n                By.XPATH,\n                '//*[@id=\"b2searchresultsPage\"]/div[49]/div/div/div',\n            )\n        )\n    )\n    click_button = wait.until(\n        EC.element_to_be_clickable(\n            (\n                By.XPATH,\n                '//*[@id=\"b2searchresultsPage\"]/div[48]/div/div/div/div[1]/div[1]/div/button',\n            )\n        )\n    )\n    if element_present and click_button:\n        time.sleep(2)  # Aguarda por 2 segundos antes de clicar\n        click_button.click()\n        wait.until_not(\n            EC.presence_of_element_located(\n                (\n                    By.XPATH,\n                    '//*[@id=\"b2searchresultsPage\"]/div[49]/div/div/div',\n                )\n            )\n        )\nexcept Exception as e:\n    print(f'Um erro ocorreu ao fechar o pop-up: {str(e)}')\n</code></pre>"},{"location":"webscrapy/#documentacao-da-funcao-construct_url","title":"Documenta\u00e7\u00e3o da Fun\u00e7\u00e3o <code>construct_url</code>","text":""},{"location":"webscrapy/#descricao_2","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>construct_url</code> constr\u00f3i uma URL para os resultados de busca do Booking.com com base nas informa\u00e7\u00f5es fornecidas.</p>"},{"location":"webscrapy/#parametros_2","title":"Par\u00e2metros","text":"<ul> <li><code>checkin_date</code> (str): A data de check-in no formato 'AAAA-MM-DD'.</li> <li><code>checkout_date</code> (str): A data de check-out no formato 'AAAA-MM-DD'.</li> <li><code>destination</code> (str): A cidade de destino para a pesquisa.</li> <li><code>adults</code> (int): O n\u00famero de adultos.</li> <li><code>rooms</code> (int): O n\u00famero de quartos.</li> <li><code>children</code> (int): O n\u00famero de crian\u00e7as.</li> <li><code>currency</code> (str): A moeda desejada.</li> </ul>"},{"location":"webscrapy/#retorno","title":"Retorno","text":"<ul> <li><code>str</code>: A URL constru\u00edda.</li> </ul>"},{"location":"webscrapy/#excecoes_2","title":"Exce\u00e7\u00f5es","text":"<p>A fun\u00e7\u00e3o pode gerar uma exce\u00e7\u00e3o do tipo <code>Exception</code> se ocorrer um erro durante a constru\u00e7\u00e3o da URL.</p>"},{"location":"webscrapy/#codigo_2","title":"C\u00f3digo","text":"<p>Aqui est\u00e1 o c\u00f3digo-fonte da fun\u00e7\u00e3o <code>construct_url</code>:</p> <p>```python def construct_url(     checkin_date, checkout_date, destination, adults, rooms, children, currency ):     \"\"\"     Constr\u00f3i uma URL para os resultados de busca do Booking.com com base nas informa\u00e7\u00f5es fornecidas.</p> <pre><code>:param checkin_date: A data de check-in no formato 'AAAA-MM-DD'.\n:type checkin_date: str\n:param checkout_date: A data de check-out no formato 'AAAA-MM-DD'.\n:type checkout_date: str\n:param destination: A cidade de destino para a pesquisa.\n:type destination: str\n:param adults: O n\u00famero de adultos.\n:type adults: int\n:param rooms: O n\u00famero de quartos.\n:type rooms: int\n:param children: O n\u00famero de crian\u00e7as.\n:type children: int\n:param currency: A moeda desejada.\n:type currency: str\n\n:return: A URL constru\u00edda.\n:rtype: str\n\n:raises Exception: Se ocorrer um erro durante a constru\u00e7\u00e3o da URL.\n\"\"\"\ntry:\n    url = f'https://www.booking.com/searchresults.en-us.html?checkin={checkin_date}&amp;checkout={checkout_date}&amp;selected_currency={currency}&amp;ss={destination}&amp;ssne={destination}&amp;ssne_untouched={destination}&amp;lang=en-us&amp;sb=1&amp;src_elem=sb&amp;src=searchresults&amp;dest_type=city&amp;group_adults={adults}&amp;no_rooms={rooms}&amp;group_children={children}&amp;sb_travel_purpose=leisure'\n    return url\nexcept Exception as e:\n    print(f'Um erro ocorreu: {e}')\n</code></pre>"},{"location":"webscrapy/#documentacao-da-funcao-extract_hotel_info","title":"Documenta\u00e7\u00e3o da Fun\u00e7\u00e3o <code>extract_hotel_info</code>","text":""},{"location":"webscrapy/#descricao_3","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>extract_hotel_info</code> extrai informa\u00e7\u00f5es de um elemento de hotel e retorna um dicion\u00e1rio.</p>"},{"location":"webscrapy/#parametros_3","title":"Par\u00e2metros","text":"<ul> <li><code>hotel</code>: O elemento do hotel a partir do qual extrair informa\u00e7\u00f5es.</li> </ul>"},{"location":"webscrapy/#retorno_1","title":"Retorno","text":"<ul> <li><code>dict</code>: Um dicion\u00e1rio contendo as informa\u00e7\u00f5es extra\u00eddas. As chaves s\u00e3o 'hotel', 'price', 'score', 'avg review' e 'reviews count'. Os valores s\u00e3o os valores correspondentes extra\u00eddos do elemento do hotel.</li> </ul>"},{"location":"webscrapy/#codigo_3","title":"C\u00f3digo","text":"<p>Aqui est\u00e1 o c\u00f3digo-fonte da fun\u00e7\u00e3o <code>extract_hotel_info</code>:</p> <p>```python def extract_hotel_info(hotel):     \"\"\"     Extrai informa\u00e7\u00f5es de um elemento de hotel e retorna um dicion\u00e1rio.</p> <pre><code>:param hotel: O elemento do hotel a partir do qual extrair informa\u00e7\u00f5es.\n\n:return: Um dicion\u00e1rio contendo as informa\u00e7\u00f5es extra\u00eddas. As chaves s\u00e3o 'hotel', 'price', 'score', 'avg review' e 'reviews count'. Os valores s\u00e3o os valores correspondentes extra\u00eddos do elemento do hotel.\n:rtype: dict\n\"\"\"\nhotel_dict = {}\ntry:\n    title_element = hotel.find_element(\n        By.XPATH, './/div[@data-testid=\"title\"]'\n    )\n    hotel_dict['hotel'] = (\n        title_element.get_attribute('innerText') if title_element else None\n    )\nexcept:\n    hotel_dict['hotel'] = None\ntry:\n    price_element = hotel.find_element(\n        By.XPATH, './/span[@data-testid=\"price-and-discounted-price\"]'\n    )\n    hotel_dict['price'] = (\n        price_element.get_attribute('innerText') if price_element else None\n    )\nexcept:\n    hotel_dict['price'] = None\ntry:\n    score_element = hotel.find_element(\n        By.XPATH, './/div[@data-testid=\"review-score\"]/div[1]'\n    )\n    hotel_dict['score'] = (\n        score_element.get_attribute('innerText') if score_element else None\n    )\nexcept:\n    hotel_dict['score'] = None\ntry:\n    avg_review_element = hotel.find_element(\n        By.XPATH, './/div[@data-testid=\"review-score\"]/div[2]/div[1]'\n    )\n    hotel_dict['avg review'] = (\n        avg_review_element.get_attribute('innerText')\n        if avg_review_element\n        else None\n    )\nexcept:\n    hotel_dict['avg review'] = None\ntry:\n    reviews_count_element = hotel.find_element(\n        By.XPATH, './/div[@data-testid=\"review-score\"]/div[2]/div[2]'\n    )\n    hotel_dict['reviews count'] = (\n        reviews_count_element.get_attribute('innerText').split()[0]\n        if reviews_count_element\n        else None\n    )\nexcept:\n    hotel_dict['reviews count'] = None\nreturn hotel_dict\n</code></pre>"},{"location":"webscrapy/#documentacao-da-funcao-get_hotels","title":"Documenta\u00e7\u00e3o da Fun\u00e7\u00e3o <code>get_hotels</code>","text":""},{"location":"webscrapy/#descricao_4","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>get_hotels</code> obt\u00e9m uma lista de hot\u00e9is do driver fornecido.</p>"},{"location":"webscrapy/#parametros_4","title":"Par\u00e2metros","text":"<ul> <li><code>driver</code>: A inst\u00e2ncia do WebDriver.</li> </ul>"},{"location":"webscrapy/#retorno_2","title":"Retorno","text":"<ul> <li><code>list</code>: Uma lista de objetos WebElement representando os hot\u00e9is.</li> </ul>"},{"location":"webscrapy/#codigo_4","title":"C\u00f3digo","text":"<p>Aqui est\u00e1 o c\u00f3digo-fonte da fun\u00e7\u00e3o <code>get_hotels</code>:</p> <p>```python def get_hotels(driver):     \"\"\"     Obt\u00e9m uma lista de hot\u00e9is do driver fornecido.</p> <pre><code>:param driver: A inst\u00e2ncia do WebDriver.\n\n:return: Uma lista de objetos WebElement representando os hot\u00e9is.\n:rtype: list\n\"\"\"\nWebDriverWait(driver, 30).until(\n    EC.presence_of_all_elements_located(\n        (By.XPATH, './/div[@data-testid=\"property-card\"]')\n    )\n)\nreturn driver.find_elements(\n    By.XPATH, './/div[@data-testid=\"property-card\"]'\n)\n</code></pre>"},{"location":"webscrapy/#documentacao-da-funcao-init_driver","title":"Documenta\u00e7\u00e3o da Fun\u00e7\u00e3o <code>init_driver</code>","text":""},{"location":"webscrapy/#descricao_5","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>init_driver</code> inicializa e retorna uma inst\u00e2ncia do WebDriver para o navegador Edge.</p>"},{"location":"webscrapy/#retorno_3","title":"Retorno","text":"<ul> <li><code>WebDriver</code>: Uma inst\u00e2ncia do WebDriver para o navegador Edge.</li> </ul>"},{"location":"webscrapy/#codigo_5","title":"C\u00f3digo","text":"<p>Aqui est\u00e1 o c\u00f3digo-fonte da fun\u00e7\u00e3o <code>init_driver</code>:</p> <p>```python def init_driver():     \"\"\"     Inicializa e retorna uma inst\u00e2ncia do WebDriver para o navegador Edge.</p> <pre><code>:return: Uma inst\u00e2ncia do WebDriver para o navegador Edge.\n:rtype: WebDriver\n\"\"\"\nservice = init_service()\nreturn webdriver.Edge(service=service)\n</code></pre>"},{"location":"webscrapy/#documentacao-da-funcao-init_service","title":"Documenta\u00e7\u00e3o da Fun\u00e7\u00e3o <code>init_service</code>","text":""},{"location":"webscrapy/#descricao_6","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>init_service</code> inicializa e retorna um objeto Service para o WebDriver do Microsoft Edge.</p>"},{"location":"webscrapy/#retorno_4","title":"Retorno","text":"<ul> <li><code>Service</code>: Um objeto Service para o WebDriver do Microsoft Edge.</li> </ul>"},{"location":"webscrapy/#codigo_6","title":"C\u00f3digo","text":"<p>Aqui est\u00e1 o c\u00f3digo-fonte da fun\u00e7\u00e3o <code>init_service</code>:</p> <p>```python def init_service():     \"\"\"     Inicializa e retorna um objeto Service para o WebDriver do Microsoft Edge.</p> <pre><code>:return: Um objeto Service para o WebDriver do Microsoft Edge.\n:rtype: Service\n\"\"\"\nreturn Service(\n    r'C:\\\\Users\\\\truks\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python311\\\\Scripts\\\\msedgedriver.exe'\n)\n</code></pre>"},{"location":"webscrapy/#documentacao-da-funcao-main","title":"Documenta\u00e7\u00e3o da Fun\u00e7\u00e3o <code>main</code>","text":""},{"location":"webscrapy/#descricao_7","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>main</code> \u00e9 a fun\u00e7\u00e3o principal para extrair informa\u00e7\u00f5es de hot\u00e9is.</p>"},{"location":"webscrapy/#parametros_5","title":"Par\u00e2metros","text":"<ul> <li><code>checkin_date</code> (str): A data de check-in no formato 'AAAA-MM-DD'.</li> <li><code>checkout_date</code> (str): A data de check-out no formato 'AAAA-MM-DD'.</li> <li><code>destination</code> (str): A cidade de destino.</li> <li><code>adults</code> (int): O n\u00famero de adultos.</li> <li><code>rooms</code> (int): O n\u00famero de quartos.</li> <li><code>children</code> (int): O n\u00famero de crian\u00e7as.</li> <li><code>currency</code> (str): A moeda desejada.</li> </ul>"},{"location":"webscrapy/#codigo_7","title":"C\u00f3digo","text":"<p>Aqui est\u00e1 o c\u00f3digo-fonte da fun\u00e7\u00e3o <code>main</code>:</p> <p>```python def main(checkin_date, checkout_date, destination):     \"\"\"     Fun\u00e7\u00e3o principal para extrair informa\u00e7\u00f5es de hot\u00e9is.</p> <pre><code>:param checkin_date: A data de check-in no formato 'AAAA-MM-DD'.\n:type checkin_date: str\n:param checkout_date: A data de check-out no formato 'AAAA-MM-DD'.\n:type checkout_date: str\n:param destination: A cidade de destino.\n:type destination: str\n\n:return: None\n\"\"\"\nservice = init_service()\ndriver = webdriver.Edge(service=service)\n\nurl = construct_url(\n    checkin_date,\n    checkout_date,\n    destination,\n    adults,\n    rooms,\n    children,\n    currency,\n)\n\ndriver.get(url)\n\nclose_popup(driver)\n\nscrape_pages(driver)\n\ndriver.quit()\n</code></pre> <p>if name == 'main':     checkin_date = '2024-02-15'     checkout_date = '2024-2-30'     destination = 'Rio de Janeiro'     adults = 1     rooms = 1     children = 0     currency = 'USD'     main(checkin_date, checkout_date, destination)</p>"},{"location":"webscrapy/#documentacao-da-funcao-save_hotel_info","title":"Documenta\u00e7\u00e3o da Fun\u00e7\u00e3o <code>save_hotel_info</code>","text":""},{"location":"webscrapy/#descricao_8","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>save_hotel_info</code> salva as informa\u00e7\u00f5es do hotel em arquivos Excel e CSV.</p>"},{"location":"webscrapy/#parametros_6","title":"Par\u00e2metros","text":"<ul> <li><code>hotels_list</code> (list): Uma lista de dicion\u00e1rios contendo informa\u00e7\u00f5es do hotel.</li> <li><code>filename</code> (str): O nome base do arquivo a ser usado para os arquivos de sa\u00edda.</li> <li><code>save_per_page</code> (bool): Se salvar cada p\u00e1gina em um arquivo separado.</li> </ul>"},{"location":"webscrapy/#codigo_8","title":"C\u00f3digo","text":"<p>Aqui est\u00e1 o c\u00f3digo-fonte da fun\u00e7\u00e3o <code>save_hotel_info</code>:</p> <p>```python def save_hotel_info(hotels_list, filename, save_per_page):     \"\"\"     Salva as informa\u00e7\u00f5es do hotel em arquivos Excel e CSV.</p> <pre><code>:param hotels_list: Uma lista de dicion\u00e1rios contendo informa\u00e7\u00f5es do hotel.\n:type hotels_list: list\n:param filename: O nome base do arquivo a ser usado para os arquivos de sa\u00edda.\n:type filename: str\n:param save_per_page: Se salvar cada p\u00e1gina em um arquivo separado.\n:type save_per_page: bool\n\n:return: None\n\"\"\"\ntry:\n    df = pd.DataFrame(hotels_list)\n    out_dir = 'data/out'\n    os.makedirs(out_dir, exist_ok=True)\n    if save_per_page:\n        excel_file = os.path.join(\n            out_dir, 'all_hotels_splitted_files', f'{filename}.xlsx'\n        )\n    else:\n        excel_file = os.path.join(\n            out_dir, 'all_hotels_files', 'all_hotels.xlsx'\n        )\n        csv_file = os.path.join(\n            out_dir, 'all_hotels_files', 'all_hotels.csv'\n        )\n    df.to_excel(excel_file, index=False)\n    if not save_per_page:\n        df.to_csv(csv_file, index=False)\n    print(f'There are: {len(hotels_list)} hotels.')\nexcept Exception as e:\n    print(f'An error occurred: {str(e)}')\n</code></pre>"},{"location":"webscrapy/#documentacao-da-funcao-scrape_pages","title":"Documenta\u00e7\u00e3o da Fun\u00e7\u00e3o <code>scrape_pages</code>","text":""},{"location":"webscrapy/#descricao_9","title":"Descri\u00e7\u00e3o","text":"<p>A fun\u00e7\u00e3o <code>scrape_pages</code> \u00e9 respons\u00e1vel por extrair informa\u00e7\u00f5es de m\u00faltiplas p\u00e1ginas de hot\u00e9is em um site usando Selenium WebDriver.</p>"},{"location":"webscrapy/#parametros_7","title":"Par\u00e2metros","text":"<ul> <li><code>driver</code>: Uma inst\u00e2ncia do Selenium WebDriver utilizada para interagir com a p\u00e1gina da web.</li> </ul>"},{"location":"webscrapy/#retorno_5","title":"Retorno","text":"<p>A fun\u00e7\u00e3o n\u00e3o possui um retorno expl\u00edcito. Ela realiza a extra\u00e7\u00e3o de informa\u00e7\u00f5es de hot\u00e9is e, opcionalmente, salva os resultados em arquivos.</p>"},{"location":"webscrapy/#funcionamento","title":"Funcionamento","text":"<ol> <li> <p>Inicializa\u00e7\u00e3o: A fun\u00e7\u00e3o inicializa uma lista vazia chamada <code>all_hotels_list</code> para armazenar as informa\u00e7\u00f5es dos hot\u00e9is.</p> </li> <li> <p>Obten\u00e7\u00e3o do N\u00famero de P\u00e1ginas: Utilizando Selenium, a fun\u00e7\u00e3o identifica o n\u00famero total de p\u00e1ginas dispon\u00edveis para extra\u00e7\u00e3o, com base nos elementos da barra de navega\u00e7\u00e3o.</p> </li> <li> <p>Input do Usu\u00e1rio: Solicita ao usu\u00e1rio que informe o n\u00famero desejado de p\u00e1ginas a serem extra\u00eddas e se deseja salvar cada p\u00e1gina em um arquivo separado ou todas as p\u00e1ginas em um \u00fanico arquivo.</p> </li> <li> <p>Loop de Extra\u00e7\u00e3o por P\u00e1gina: Itera sobre o n\u00famero de p\u00e1ginas fornecido pelo usu\u00e1rio.</p> <p>a. Extra\u00e7\u00e3o de Hot\u00e9is: Utiliza a fun\u00e7\u00e3o <code>get_hotels</code> para obter a lista de hot\u00e9is da p\u00e1gina atual.</p> <p>b. Extra\u00e7\u00e3o de Informa\u00e7\u00f5es: Utiliza a fun\u00e7\u00e3o <code>extract_hotel_info</code> para obter as informa\u00e7\u00f5es de cada hotel na p\u00e1gina.</p> <p>c. Acumula\u00e7\u00e3o de Dados: Adiciona as informa\u00e7\u00f5es dos hot\u00e9is \u00e0 lista <code>all_hotels_list</code>.</p> <p>d. Salvamento Opcional por P\u00e1gina: Se o usu\u00e1rio optou por salvar cada p\u00e1gina separadamente, utiliza a fun\u00e7\u00e3o <code>save_hotel_info</code> para salvar as informa\u00e7\u00f5es dos hot\u00e9is da p\u00e1gina atual em um arquivo.</p> <p>e. Navega\u00e7\u00e3o para a Pr\u00f3xima P\u00e1gina: Se ainda houver p\u00e1ginas a serem extra\u00eddas, clica no bot\u00e3o da pr\u00f3xima p\u00e1gina e aguarda uma mudan\u00e7a na URL para garantir que a p\u00e1gina foi carregada completamente.</p> </li> <li> <p>Salvamento Final: Se o usu\u00e1rio optou por salvar todas as p\u00e1ginas em um \u00fanico arquivo, utiliza a fun\u00e7\u00e3o <code>save_hotel_info</code> para salvar todas as informa\u00e7\u00f5es dos hot\u00e9is em um arquivo.</p> </li> </ol>"},{"location":"webscrapy/#excecoes_3","title":"Exce\u00e7\u00f5es","text":"<ul> <li>Em caso de erro durante o processo de extra\u00e7\u00e3o de informa\u00e7\u00f5es de uma p\u00e1gina, a exce\u00e7\u00e3o \u00e9 capturada e uma mensagem \u00e9 exibida indicando a ocorr\u00eancia do erro.</li> </ul>"}]}